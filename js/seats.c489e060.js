"use strict";(self["webpackChunkelectathon19_app"]=self["webpackChunkelectathon19_app"]||[]).push([[345],{6850:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Results "),t.isTest?a("span",[t._v("(TEST)")]):t._e()]),a("b-card",[a("b-row",[a("b-col",{attrs:{md:"6",sm:"12"}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Select election type:","label-for":"input-1"}},[a("b-form-select",{attrs:{id:"input-1",options:t.options,required:"",placeholder:"Select type"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1),a("b-col",{staticClass:"d-flex align-items-center justify-content-between",attrs:{md:"6",sm:"12"}},[t.loading?a("span",[t._v(" Loading... ")]):a("span",[t.seatsObj?a("span",[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.getSeats.apply(null,arguments)},keydown:function(e){return e.preventDefault(),t.getSeats.apply(null,arguments)}}},[a("img",{staticClass:"mr-1",attrs:{alt:"Refresh",src:s(9525),width:"15",height:"15"}}),t._v("Refresh ")])]):t._e()])])],1),a("b-row",[a("b-col",[a("b-card",{staticClass:"mb-2",attrs:{header:t.selectedText,"no-body":""}},[a("b-card-body",[a("b-card",{staticClass:"mb-2 text-center"},[a("HalfDonutComponent",{attrs:{seats:t.seats}})],1)],1),a("b-list-group",{attrs:{flush:""}},t._l(t.seats,(function(e){return a("b-list-group-item",{key:e.key},[a("b-row",[a("b-col",{staticClass:"d-flex align-items-center justify-content-between",attrs:{md:"6","offset-md":"3"}},[a("span",[a("svg",{attrs:{width:2+5*e.value.seats,height:"12"}},[a("rect",{style:{fill:"#"+e.value.group.color},attrs:{x:"0",y:"0",width:2+5*e.value.seats,height:"12"}})]),a("br"),t._v(t._s(e.value.group.name)+": "),a("b",[t._v(t._s(e.value.seats))]),e.value.seats>1?a("span",[t._v(" seats")]):a("span",[t._v(" seat")])]),a("span",{staticClass:"small text-right"},[t._v(" F: "),a("b",[t._v(t._s(e.value.women))]),a("br"),t._v("M: "),a("b",[t._v(t._s(e.value.men))])])])],1)],1)})),1)],1)],1)],1)],1)],1)},r=[],n=s(4748),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"svg-content",attrs:{viewBox:"0 0 "+t.w+" "+t.h,preserveAspectRatio:"xMinYMin meet"}},[s("g",{ref:"donut",staticClass:"donut",attrs:{transform:"translate("+t.w/2+","+t.h+")"}}),s("g",{ref:"text",staticClass:"text",attrs:{transform:"translate("+t.w/2+", "+.9*t.h+")"}},[s("text",[t._v(t._s(t.text))])])])},i=[],o=s(6443),u={props:{seats:{type:Array,required:!0}},data(){return{w:400,h:200,text:""}},mounted(){this.render()},watch:{seats(){this.render()}},computed:{pie(){return o.Z.pie().padAngle(.01).sort(null).startAngle(-Math.PI/2).endAngle(Math.PI/2).value((t=>t.value.seats))},arc(){const t=Math.min(this.w,this.h);return o.Z.arc().innerRadius(.67*t).outerRadius(t-1)},arcs(){return this.pie(this.seats.filter((t=>t.value.seats>0)))}},methods:{render(){const t=o.Z.select(this.$refs.donut);t.selectAll("path.arc").data(this.arcs).join("path").attr("class","arc").attr("fill",(t=>`#${t.data.value.group.color}`)).attr("d",this.arc).on("mouseover",((t,e)=>{this.text=`${e.data.value.group.name}: ${e.data.value.seats} seat${e.data.value.seats>1?"s":""}`})).on("mouseout",(()=>{this.text=""}))}}},c=u,h=s(1001),d=(0,h.Z)(c,l,i,!1,null,"5fb687f6",null),p=d.exports,v={data(){return{electathonService:n.Z,options:n.Z.types,seatsObj:null,isTest:!1,loading:!1}},mounted(){this.getSeats()},watch:{selected(){this.getSeats()}},computed:{selected:{get(){return this.$route.params.id},set(t){this.$router.push(`/seats/${t}`)}},selectedText(){return this.options.find((t=>t.value===this.selected)).text},seats(){return this.seatsObj?Object.keys(this.seatsObj).filter((t=>Number.isInteger(+t)&&""!==t)).map((t=>({key:t,value:this.seatsObj[t]}))).sort(((t,e)=>e.value.seats-t.value.seats)):[]}},methods:{getSeats(){this.selected&&(this.loading=!0,this.electathonService.getSeats(this.selected).then((t=>{this.seatsObj=t,this.loading=!1})))}},components:{HalfDonutComponent:p}},f=v,m=(0,h.Z)(f,a,r,!1,null,null,null),b=m.exports},9525:function(t,e,s){t.exports=s.p+"img/refresh.ab60f158.svg"}}]);
//# sourceMappingURL=seats.c489e060.js.map